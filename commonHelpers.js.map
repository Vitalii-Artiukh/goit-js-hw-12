{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst myKeyPixabay = '45488193-7ca777789e7fbcf45aeeb8195'; // key='***'\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchToPixabay = async (questEntered, Page) => {\n  const urlOptions = {\n    params: {\n      page: Page,\n      key: myKeyPixabay,\n      q: questEntered,\n      image_type: 'photo',\n      safesearch: true,\n      orientation: 'horizontal',\n      per_page: 15,\n    },\n  };\n\n  return await axios.get('', urlOptions);\n};\n","export const createGalleryCard = imageSet => {\n  return `<li class=\"gallery-card\">\n            <a href=\"${imageSet.largeImageURL}\" class=\"gallery-link\">\n              <img class=\"image-normal\" src=\"${imageSet.webformatURL}\" alt=\"${imageSet.tags}\"/>\n              <ul class=\"image-text\">\n                <li class=\"image-text-item\">\n                  <p class=\"key key-likes\">Likes</p>\n                  <p class=\"value value-likes\">${imageSet.likes}</p>\n                </li>\n                <li class=\"image-text-item\">\n                  <p class=\"key key-views\">Viwes</p>\n                  <p class=\"value value-views\">${imageSet.views}</p>\n                </li>\n                <li class=\"image-text-item\">\n                  <p class=\"key key-comments\">Comments</p>\n                  <p class=\"value value-comments\">${imageSet.comments}</p>\n                </li>\n                <li class=\"image-text-item\">\n                  <p class=\"key key-downloads\">Downloads</p>\n                  <p class=\"value value-downloads\">${imageSet.downloads}</p>\n                </li>\n              </ul>\n            </a>\n          </li>`;\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { fetchToPixabay } from './js/pixabay-api';\nimport { createGalleryCard } from './js/render-functions';\n\nconst formSerched = document.querySelector('.js-search-form');\nconst gallery = document.querySelector('.js-gallery');\nconst preloader = document.querySelector('.preloader-wrap');\nconst moreBtn = document.querySelector('.js-load-more-btn');\n\nlet searchResault = '';\nlet numberPage = 1;\nlet quantityPages = 1;\nlet heightCard = 0;\n\nconst forRefresh = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionDelay: 150,\n});\n\nconst submitSearchPhoto = async event => {\n  try {\n    moreBtn.classList.add('is-visible');\n    preloader.classList.remove('is-visible');\n    event.preventDefault();\n    numberPage = 1;\n\n    searchResault = formSerched.elements.user_query.value;\n\n    const response = await fetchToPixabay(searchResault, numberPage);\n\n    quantityPages = response.data.totalHits / 15;\n\n    gallery.innerHTML = '';\n    formSerched.reset();\n\n    if (response.data.hits.length === 0) {\n      preloader.classList.add('is-visible');\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        maxWidth: '432px',\n        messageColor: '#fafafb',\n        messageSize: '16px',\n        messageLineHeight: '150%',\n      });\n      return;\n    }\n\n    const photoCardsInfo = response.data.hits\n      .map(details => createGalleryCard(details))\n      .join('');\n\n    gallery.innerHTML = photoCardsInfo;\n    heightCard = document\n      .querySelector('.gallery-card')\n      .getBoundingClientRect();\n  } catch (error) {\n    iziToast.error({\n      title: `${error}`,\n      position: 'center',\n      backgroundColor: '#ef4040',\n    });\n    formSerched.reset();\n    preloader.classList.add('is-visible');\n    return;\n  }\n\n  preloader.classList.add('is-visible');\n  moreBtn.classList.remove('is-visible');\n  forRefresh.refresh();\n  numberPage += 1;\n\n  if (Math.ceil(quantityPages) < numberPage) {\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n    moreBtn.classList.add('is-visible');\n  }\n};\n\nconst addMorePhoto = async event => {\n  try {\n    preloader.classList.remove('is-visible');\n\n    const response = await fetchToPixabay(searchResault, numberPage);\n\n    if (Math.ceil(quantityPages) >= numberPage) {\n      const photoCardsInfo = response.data.hits\n        .map(details => createGalleryCard(details))\n        .join('');\n\n      gallery.insertAdjacentHTML('beforeend', photoCardsInfo);\n      window.scrollBy({\n        top: heightCard.height * 2,\n        behavior: 'smooth',\n      });\n    }\n    moreBtn.classList.add('is-visible');\n\n    forRefresh.refresh();\n\n    preloader.classList.add('is-visible');\n    moreBtn.classList.remove('is-visible');\n    numberPage += 1;\n\n    if (Math.ceil(quantityPages) < numberPage) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      moreBtn.classList.add('is-visible');\n    }\n  } catch (error) {\n    iziToast.error({\n      title: `${error}`,\n      position: 'center',\n      backgroundColor: '#ef4040',\n    });\n    preloader.classList.add('is-visible');\n  }\n};\n\nformSerched.addEventListener('submit', submitSearchPhoto);\nmoreBtn.addEventListener('click', addMorePhoto);\n"],"names":["myKeyPixabay","axios","fetchToPixabay","questEntered","Page","urlOptions","createGalleryCard","imageSet","formSerched","gallery","preloader","moreBtn","searchResault","numberPage","quantityPages","heightCard","forRefresh","SimpleLightbox","submitSearchPhoto","event","response","iziToast","photoCardsInfo","details","error","addMorePhoto"],"mappings":"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"}